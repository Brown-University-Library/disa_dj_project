{% extends "disa_app_templates/base.html" %}
{% load staticfiles %}
{% block header_other %}
<link href="https://unpkg.com/tabulator-tables/dist/css/tabulator.min.css" rel="stylesheet">
{% endblock header_other %}

{% block nav_options %}
{% endblock nav_options %}

{% block content %}

<!-- language warning modal, appears immediately on load -->
{% include "disa_app_templates/modals/warn_language.html" %}

<!-- Details modal -->
{% include "disa_app_templates/modals/record_details.html" %}

<!-- "Loading ..." modal -->
<!--
<div class="modal fade" id="loadingModal" data-backdrop="static" tabindex="-1" role="dialog" 
     aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body" id="loadingModalMessage">
                <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                Loading...
            </div>
        </div>
    </div>
</div>
-->
<!-- Main content container: search and results -->

<section class="" id="main-content">
    <div class="row">
        <p class="col-md-6">
            <em>Welcome, community collaborators!</em> This is a
            preliminary, experimental search portal of the
            <a href="http://indigenousslavery.org">Stolen Relations: Recovering Stories of Indigenous Enslavement in the Americas</a>, which
            allows you to search 
            <span class="badge badge-secondary"></span>
            references to individuals drawn from
            <span class="badge badge-secondary"></span>
            archival records regarding the enslavement of indigenous
            populations in the Americas, from the 17<sup>th</sup> to the
            19<sup>th</sup> centuries.
        </p>
        <div class="col-md-6">
            <p>
                As you explore, please understand that <em>this
                database is currently under development and may
                contain errors, and will continuously be
                updated</em>.
            </p>
            <p>
                We welcome any and all feedback, corrections,
                and suggestions for future development &mdash;
                please contact <a href="mailto:linford_fisher@brown.edu">Lin Fisher</a>.
            </p>
            <div>
                <figure class="d-flex figure">
                    <a href="https://localcontexts.org/label/tk-community-voice/" class="flex-shrink-0"><img src="https://localcontexts.org/wp-content/uploads/2020/11/tk_label_cv.png" class="figure-img"></a>
                    <figcaption class="flex-grow figure-caption"><a href="https://localcontexts.org/label/tk-community-voice/">TK Community Voice</a></figcaption>
                </figure>
                <figure class="d-flex figure">
                    <a href="https://localcontexts.org/label/tk-non-commercial/" class="flex-shrink-0"><img class="figure-img" src="https://localcontexts.org/wp-content/uploads/2020/11/tk_label_nc.png" /></a>
                    <figcaption class="flex-grow-1 figure-caption"><a href="https://localcontexts.org/label/tk-non-commercial/">Non-Commercial</a></figcaption>
                </figure>
            </div>

        </div>
    </div>

    <!-- 2-column layout: query and search results on left, decolonizing frame on right -->

    <div class="top-search-div row">

        <div class="col-9" id="search-and-results">

            <!-- Search query area -->

            <div class="top-search-div row">
                <div class="col-6">
                    <label for="general-search">
                        Search in any field for
                        <input type="text" id="general-search"></input>
                    </label>
                    <em class="text-nowrap">
                        &nbsp;(to focus your search, use the fields below)
                    </em>
                </div>
                <div class="col-6">
                    <p id="view-options">View results as
                        <input type="radio" id="biographical-view-option" name="view-type" value="biographical" checked>
                        <label for="biographical-view-option">narratives</label>
                        <input type="radio" id="tabular-view-option" name="view-type" value="tabular">
                        <label for="tabular-view-option">a table</label>
                    </p>
                    <p>
                        <button id="download-data" title="Download the results as a CSV file">
                            Download results
                        </button>
                    </p>
                </div>
            </div>

            <!-- Container for data table (tabulator library output) -->

            <div id="data-display" class="table-borderless biographical">
                &nbsp;
            </div>
        </div>
        <div class="col-3" id="dcf">
            <h2>Notes</h2>
            <template id="dcf-resource-template">
                <div class="dcf-resource card bg-light mb-3">
                    <div class="card-header">
                        <span class="dcf-number badge bg-primary text-light"></span>
                        <span class="dcf-resource-title"></span>
                        <a class="dcf-resource-link card-link stretched-link" 
                            href="#" target="_BLANK"
                            style="font-weight: bold; font-size: 80%"
                            title="">&nbsp;</a>
                    </div>
                    <div class="card-body">
                        <img class="dcf-featured-image" src="" alt="" />
                        <span class="dcf-resource-text"></span>
                    </div>
                </div>
            </template>
            <div id="dcf-content"></div>
        </div>
    </div>
</section>

{% endblock content %}
{% block footer %}
{% include "disa_app_templates/acknowledgements.html" %}
 {% endblock footer %}

{% block page_specific_js%}
<!-- Main setup routine -->
<script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>
<script type="module" defer src="{% static 'js/browse_tabulator.js' %}"></script>
<!-- trigger warningModal onload -->
<script>
var warningModal= new bootstrap.Modal('#warningModal').show()
</script>

{% endblock page_specific_js %}
